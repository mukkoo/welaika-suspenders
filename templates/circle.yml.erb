machine:
  timezone:
    Europe/Rome
dependencies:
  pre:
    - npm install yarn
  bundler:
    without: [production, staging]
database:
  override:
    - RAILS_ENV=development bin/setup
test:
  pre:
    - mkdir $CIRCLE_ARTIFACTS/coverage $CIRCLE_ARTIFACTS/quality $CIRCLE_ARTIFACTS/security
    - bundle exec rubocop --format html -o $CIRCLE_ARTIFACTS/quality/rubocop.html
    - bundle exec slim-lint app/views/ &> $CIRCLE_ARTIFACTS/quality/slim-lint.txt
    - bundle exec brakeman --exit-on-warn -o $CIRCLE_ARTIFACTS/security/brakeman.html
    - bundle exec bundle-audit check --update
